<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Projects ‚Ä¢ Chamu.io</title>
  <link rel="stylesheet" href="/assets/site.css?v=5"/>
  <style>
    .board {
      display:grid;
      grid-template-columns: repeat(3,minmax(0,1fr));
      gap:.4rem;
      align-items:start;
    }
    .board ul {margin:.25rem 0 1.25rem;list-style:none;padding:0;}
    .board ul li {margin-bottom:.25rem;}
    .subtle{color:var(--muted);font-size:.9rem;margin-top:.25rem;}
    @media(max-width:980px){.board{grid-template-columns:1fr 1fr;}}
    @media(max-width:640px){.board{grid-template-columns:1fr;}}

    /* Sleek search bar (previous look) */
    .search-bar {
      display:flex;
      justify-content:center;
      align-items:center;
      margin:1rem 0 1.5rem;
    }
    .search-bar input {
      max-width:520px;
      width:100%;
      padding:.7rem 1rem;
      border:1px solid rgba(0,0,0,.15);
      border-radius:10px;
      font:inherit;
    }
  </style>
</head>

<body data-theme="cream-light" data-bg="boids">
  <canvas id="boids-bg"></canvas>

  <div class="page">
    <header class="site-header">
      <nav class="nav" aria-label="Main">
        <a class="brand" href="/">Chamu.io</a>
        <div class="menu">
          <a href="/about/">About</a>
          <a href="/resume/">Resume</a>
          <a href="/projects/">Projects</a>
          <a href="/stats/">Stats</a>
          <a href="/contact/">Contact</a>
        </div>
      </nav>
    </header>

    <main class="wrap">
      <h1 style="text-align:center;">Projects</h1>
      <p style="text-align:center;color:var(--muted);max-width:760px;margin:.25rem auto 1rem;">
        <em>Projects across different areas ‚Äî search or browse below.</em>
      </p>

      <div class="search-bar">
        <input id="search" type="search" placeholder="Search projects (name, area, keywords, location)">
      </div>

      <section class="board">
        <div><h2 style="text-align:center;">Maths</h2><ul id="col-maths"></ul></div>
        <div><h2 style="text-align:center;">Bio</h2><ul id="col-bio"></ul></div>
        <div><h2 style="text-align:center;">Computing</h2><ul id="col-computing"></ul></div>
      </section>

      <div id="count" style="text-align:center;color:var(--muted);margin-top:.5rem;"></div>
    </main>

    <footer>
      <div class="icons">
        <a class="icon" href="https://github.com/your-username" target="_blank" rel="noopener" aria-label="GitHub">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M12 .5a12 12 0 0 0-3.79 23.4c.6.11.82-.26.82-.58v-2.02c-3.34.73-4.04-1.61-4.04-1.61-.55-1.38-1.34-1.75-1.34-1.75-1.09-.74.08-.73.08-.73 1.2.08 1.83 1.23 1.83 1.23 1.07 1.83 2.8 1.3 3.49.99.11-.78.42-1.3.76-1.6-2.67-.31-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.23-3.22-.12-.3-.53-1.55.12-3.23 0 0 1.01-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.29-1.55 3.3-1.23 3.3-1.23.65 1.68.24 2.93.12 3.23.77.84 1.23 1.91 1.23 3.22 0 4.61-2.81 5.61-5.49 5.92.43.37.81 1.1.81 2.22v3.29c0 .32.21.7.82.58A12 12 0 0 0 12 .5z"/></svg>
        </a>
        <a class="icon" href="https://www.linkedin.com/in/your-handle" target="_blank" rel="noopener" aria-label="LinkedIn">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M4.98 3.5C4.98 4.88 3.86 6 2.5 6S0 4.88 0 3.5C0 2.12 1.12 1 2.5 1S4.98 2.12 4.98 3.5zM.5 8h4V24h-4V8zm7.5 0h3.8v2.2h.05c.53-1 1.84-2.2 3.78-2.2 4.05 0 4.8 2.67 4.8 6.16V24h-4v-7.9c0-1.89-.03-4.32-2.63-4.32-2.63 0-3.03 2.05-3.03 4.18V24h-4V8z"/></svg>
        </a>
        <a class="icon" href="mailto:me@chamu.io" aria-label="Email">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M2 6.5A2.5 2.5 0 0 1 4.5 4h15A2.5 2.5 0 0 1 22 6.5v11A2.5 2.5 0 0 1 19.5 20h-15A2.5 2.5 0 0 1 2 17.5v-11Z"/></svg>
        </a>
      </div>
      <div>¬© <span id="year"></span> Chamu</div>
    </footer>
  </div>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    const STATUS_STYLES = {
      active:{bg:'#e8f7ef',text:'#147a3b',border:'#bfe8cf'},
      paused:{bg:'#fff4e5',text:'#a15c00',border:'#ffd59e'},
      archived:{bg:'#f2f4f7',text:'#384250',border:'#d1d6de'},
      idea:{bg:'#e9f2ff',text:'#1e5bb8',border:'#bed8ff'}
    };

    function normalizeArea(a=''){a=a.toLowerCase();
      if(a==='biology')return'bio';
      if(a==='rpi')return'computing';
      if(a.startsWith('math'))return'maths';
      if(a.startsWith('bio'))return'bio';
      if(a.startsWith('comput'))return'computing';
      return'computing';
    }
    function formatDate(iso){const d=new Date(iso);return isNaN(d)?'':d.toLocaleDateString(undefined,{year:'numeric',month:'short',day:'2-digit'});}
    function pill(status){
      const st=(status||'idea').toLowerCase();
      const s=STATUS_STYLES[st]||STATUS_STYLES.idea;
      return `<span class="pill" style="background:${s.bg};color:${s.text};border-color:${s.border};text-transform:lowercase;">${st}</span>`;
    }
    function cardHTML(p){
      const href=p.link||`/projects/${encodeURIComponent(p.id||p.name||'project')}/`;
      const kws=(p.keywords||[]).join(', ');
      const meta=[p.location?`üìç ${p.location}`:'',p.updated?`üóì ${formatDate(p.updated)}`:''].filter(Boolean).join(' ‚Ä¢ ');
      return `<a class="card" href="${href}">
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <div style="font-weight:700">${p.name}</div>${pill(p.status)}
          </div>
          <div class="subtle"><em>${p.area||'‚Äî'}</em>${kws?' ‚Ä¢ '+kws:''}</div>
          ${meta?`<div class="subtle">${meta}</div>`:''}
        </a>`;
    }

    function render(projects){
      const cols={maths:col('maths'),bio:col('bio'),computing:col('computing')};
      Object.values(cols).forEach(ul=>ul.innerHTML='');
      const groups={maths:[],bio:[],computing:[]};
      projects.forEach(p=>groups[normalizeArea(p.area)].push(p));
      Object.entries(groups).forEach(([k,v])=>{
        v.sort((a,b)=>new Date(b.updated||0)-new Date(a.updated||0));
        v.forEach(p=>cols[k].innerHTML+=`<li>${cardHTML(p)}</li>`);
      });
      document.getElementById('count').textContent=`${projects.length} project${projects.length===1?'':'s'} shown`;
    }
    const col=id=>document.getElementById(`col-${id}`);
    let ALL=[];
    fetch('/data/projects.json').then(r=>r.json()).then(j=>{ALL=j;render(ALL);});

    const input=document.getElementById('search');
    input.addEventListener('input',()=>{const q=input.value.toLowerCase();
      render(ALL.filter(p=>(p.name+p.area+p.status+p.location+(p.keywords||[]).join()).toLowerCase().includes(q)));});
  </script>

  <script src="/boids-background.js" defer></script>
</body>
</html>